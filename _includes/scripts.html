<!-- jQuery -->
<script src="{{ '/js/jquery.js' | relative_url }}"></script>

<!-- Bootstrap Core JavaScript
<script src="js/bootstrap.min.js"></script> -->

<!-- Plugin JavaScript -->
<script src="{{ '/js/jquery.easing.min.js' | relative_url }}"></script>
<script src="{{ '/js/jquery.fittext.js' | relative_url }}"></script>
<script src="{{ '/js/wow.min.js' | relative_url }}"></script>

<!-- Custom Theme JavaScript -->
<!-- <script src="/js/creative.js"></script> -->

<!-- jQuery
<script src="/vendor/jquery/jquery.min.js"></script> -->

<!-- Bootstrap Core JavaScript -->
<script src="{{ '/vendor/bootstrap/js/bootstrap.min.js' | relative_url }}"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Theme JavaScript -->
<script src="{{ '/js/new-age.min.js' | relative_url }}"></script>

<script src="{{ '/js/particles.min.js' | relative_url }}"></script>

<script type="text/javascript">
  /* particlesJS.load(@dom-id, @path-json, @callback (optional)); */
  particlesJS.load('particles-js', '{{ '/js/particlesjs2023.json' | relative_url }}', function () {
    console.log('callback - particles.js config loaded');
  });
</script>

<!-- Change logo after scrolling-->
<script src="{{ '/js/logo-changer.js' | relative_url }}"></script>

<script src='{{ '/js/fullcalendar@6.1.4/index.global.min.js' | relative_url }}'></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('program-calendar');
    if (!calendarEl || typeof FullCalendar === 'undefined') {
      return;
    }

    var palettes = {
      sunrise: {
        registration: '#6fb0ff',
        keynote: '#7ae0c5',
        session: '#f6c344',
        workshop: '#5fc0c9',
        poster: '#7fb7ff',
        break: '#ef9090',
        meal: '#e7a6b8',
        social: '#d8c679',
        panel: '#cfa0f3',
        closing: '#e3b066'
      },
      lagoon: {
        registration: '#4ac3c8',
        keynote: '#7ad8a5',
        session: '#ffd166',
        workshop: '#64c2a6',
        poster: '#4aa3ff',
        break: '#f29e94',
        meal: '#f6c7a0',
        social: '#c9df8a',
        panel: '#8fb9ff',
        closing: '#f3ae4e'
      },
      twilight: {
        registration: '#9fb3f2',
        keynote: '#83e1d0',
        session: '#ffc46b',
        workshop: '#9dd4f5',
        poster: '#b889f5',
        break: '#f48fb1',
        meal: '#ffc1a8',
        social: '#d7c2ff',
        panel: '#9ad1c8',
        closing: '#f1a85f'
      }
    };

    var defaultPalette = 'twilight';

    var draftEvents = [
      {
        title: 'Registration Desk Opens',
        start: '2026-03-16T09:00:00',
        end: '2026-03-16T09:30:00',
        extendedProps: { category: 'registration' }
      },
      {
        title: 'Workshop',
        start: '2026-03-16T09:30:00',
        end: '2026-03-16T12:30:00',
        extendedProps: { category: 'workshop' }
      },
      {
        title: 'Lunch',
        start: '2026-03-16T12:30:00',
        end: '2026-03-16T13:30:00',
        extendedProps: { category: 'meal' }
      },
      {
        title: 'Opening Remark',
        start: '2026-03-16T13:30:00',
        end: '2026-03-16T14:00:00',
        extendedProps: { category: 'registration' }
      },
      {
        title: 'Paper Session 1',
        start: '2026-03-16T14:00:00',
        end: '2026-03-16T15:10:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Coffee Break',
        start: '2026-03-16T15:10:00',
        end: '2026-03-16T15:30:00',
        extendedProps: { category: 'break' }
      },
      {
        title: 'Paper Session 2',
        start: '2026-03-16T15:30:00',
        end: '2026-03-16T16:30:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Keynote by Prof. Jun Rekimoto',
        start: '2026-03-16T16:30:00',
        end: '2026-03-16T17:30:00',
        extendedProps: { category: 'keynote' }
      },
      {
        title: 'Bus to Hotel',
        start: '2026-03-16T17:30:00',
        end: '2026-03-16T18:30:00',
        extendedProps: { category: 'social' }
      },
      {
        title: 'Reception at Hotel/Beach',
        start: '2026-03-16T18:30:00',
        end: '2026-03-16T21:00:00',
        extendedProps: { category: 'social' }
      },

      {
        title: 'Registration Desk Opens',
        start: '2026-03-17T09:00:00',
        end: '2026-03-17T09:30:00',
        extendedProps: { category: 'registration' }
      },
      {
        title: 'Keynote by Prof. Olaf Blanke',
        start: '2026-03-17T09:30:00',
        end: '2026-03-17T10:30:00',
        extendedProps: { category: 'keynote' }
      },
      {
        title: 'Coffee Break',
        start: '2026-03-17T10:30:00',
        end: '2026-03-17T10:50:00',
        extendedProps: { category: 'break' }
      },
      {
        title: 'Paper Session 3',
        start: '2026-03-17T10:50:00',
        end: '2026-03-17T12:00:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Lunch',
        start: '2026-03-17T12:00:00',
        end: '2026-03-17T13:00:00',
        extendedProps: { category: 'meal' }
      },
      {
        title: 'Poster / Demo Session 1',
        start: '2026-03-17T13:00:00',
        end: '2026-03-17T15:00:00',
        extendedProps: { category: 'poster' }
      },
      {
        title: 'Paper Session 4',
        start: '2026-03-17T15:00:00',
        end: '2026-03-17T16:00:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Keynote by Prof. Jun Tani',
        start: '2026-03-17T16:00:00',
        end: '2026-03-17T17:00:00',
        extendedProps: { category: 'keynote' }
      },
      {
        title: 'OIST Tour / Open Lab at Lab5',
        start: '2026-03-17T17:30:00',
        end: '2026-03-17T18:30:00',
        extendedProps: { category: 'social' }
      },
      {
        title: 'Open Lab / Reception',
        start: '2026-03-17T18:30:00',
        end: '2026-03-17T20:00:00',
        extendedProps: { category: 'social' }
      },

      {
        title: 'Registration Desk Opens',
        start: '2026-03-18T09:00:00',
        end: '2026-03-18T09:30:00',
        extendedProps: { category: 'registration' }
      },
      {
        title: 'Paper Session 5',
        start: '2026-03-18T09:30:00',
        end: '2026-03-18T10:30:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Coffee Break',
        start: '2026-03-18T10:30:00',
        end: '2026-03-18T10:50:00',
        extendedProps: { category: 'break' }
      },
      {
        title: 'Paper Session 6',
        start: '2026-03-18T10:50:00',
        end: '2026-03-18T12:00:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Lunch',
        start: '2026-03-18T12:00:00',
        end: '2026-03-18T13:00:00',
        extendedProps: { category: 'meal' }
      },
      {
        title: 'Poster / Demo Session 2',
        start: '2026-03-18T13:00:00',
        end: '2026-03-18T15:00:00',
        extendedProps: { category: 'poster' }
      },
      {
        title: 'Special Performance "Brain Body Jockey Project"',
        start: '2026-03-18T15:00:00',
        end: '2026-03-18T15:30:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Keynote by Prof. Catharine Holloway',
        start: '2026-03-18T15:30:00',
        end: '2026-03-18T16:30:00',
        extendedProps: { category: 'keynote' }
      },
      {
        title: 'Panel Discussion "Enhancing Humanity"',
        start: '2026-03-18T16:30:00',
        end: '2026-03-18T17:30:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Registration Desk Opens',
        start: '2026-03-19T09:00:00',
        end: '2026-03-19T09:30:00',
        extendedProps: { category: 'registration' }
      },
      {
        title: 'Paper Session 7',
        start: '2026-03-19T09:30:00',
        end: '2026-03-19T10:30:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Coffee Break',
        start: '2026-03-19T10:30:00',
        end: '2026-03-19T10:50:00',
        extendedProps: { category: 'break' }
      },
      {
        title: 'Paper Session 8',
        start: '2026-03-19T10:50:00',
        end: '2026-03-19T12:00:00',
        extendedProps: { category: 'session' }
      },
      {
        title: 'Lunch',
        start: '2026-03-19T12:00:00',
        end: '2026-03-19T13:00:00',
        extendedProps: { category: 'meal' }
      },
      {
        title: 'Paper Session 9',
        start: '2026-03-19T13:00:00',
        end: '2026-03-19T14:30:00',
        extendedProps: { category: 'closing' }
      },
      {
        title: 'Closing Ceremony / Awarding',
        start: '2026-03-19T14:30:00',
        end: '2026-03-19T15:00:00',
        extendedProps: { category: 'closing' }
      },
      {
        title: 'Workshop',
        start: '2026-03-19T15:00:00',
        end: '2026-03-19T18:00:00',
        extendedProps: { category: 'workshop' }
      }
    ];

    function colorFor(category, paletteName) {
      var palette = palettes[paletteName] || palettes[defaultPalette];
      if (!palette) {
        return '#93c7ff';
      }
      return palette[category] || palette.session || '#93c7ff';
    }

    function withPalette(event, paletteName) {
      var color = colorFor(event.extendedProps && event.extendedProps.category, paletteName);
      return Object.assign({}, event, {
        backgroundColor: color,
        borderColor: color,
        textColor: '#0f1b2d'
      });
    }

    var initialView = window.matchMedia('(max-width: 768px)').matches ? 'timeGridDay' : 'timeGridWeek';

    var calendar = new FullCalendar.Calendar(calendarEl, {
      locale: 'en-gb',
      initialView: initialView,
      initialDate: '2026-03-16',
      firstDay: 1,
      expandRows: true,
      nowIndicator: false,
      headerToolbar: {
        start: 'title',
        center: 'prev,next',
        end: 'timeGridWeek,timeGridDay'
      },
      buttonText: {
        timeGridWeek: 'Week',
        timeGridDay: 'Day'
      },
      views: {
        timeGridWeek: {
          type: 'timeGrid',
          duration: { days: 4 }
        }
      },
      validRange: {
        start: '2026-03-16',
        end: '2026-03-20'
      },
      slotMinTime: '08:00:00',
      slotMaxTime: '22:00:00',
      slotDuration: '00:30:00',
      slotLabelFormat: { hour: 'numeric', minute: '2-digit', hour12: false },
      scrollTime: '08:00:00',
      allDaySlot: false,
      dayHeaderFormat: { weekday: 'short', month: 'short', day: 'numeric' },
      titleFormat: { month: 'long', day: 'numeric', year: 'numeric' },
      eventTimeFormat: { hour: 'numeric', minute: '2-digit', hour12: false },
      height: 'auto',
      contentHeight: 'auto',
      eventDisplay: 'block',
      events: draftEvents.map(function (event) {
        return withPalette(event, defaultPalette);
      })
    });

    calendar.render();

    function applyPalette(paletteName, labelText) {
      calendar.getEvents().forEach(function (event) {
        var color = colorFor(event.extendedProps && event.extendedProps.category, paletteName);
        event.setProp('backgroundColor', color);
        event.setProp('borderColor', color);
        event.setProp('textColor', '#0f1b2d');
      });
      var label = document.getElementById('active-palette');
      if (label) {
        var name = paletteName || defaultPalette;
        var text = labelText || name;
        label.textContent = capitalize(text);
      }
    }

    function capitalize(value) {
      if (!value) {
        return '';
      }
      return value.charAt(0).toUpperCase() + value.slice(1);
    }

    var paletteButtons = document.querySelectorAll('[data-calendar-palette]');
    paletteButtons.forEach(function (button) {
      button.addEventListener('click', function () {
        var paletteName = button.getAttribute('data-calendar-palette');
        var labelText = (button.getAttribute('data-palette-label') || button.textContent || '').trim();
        paletteButtons.forEach(function (btn) {
          btn.classList.toggle('active', btn === button);
        });
        applyPalette(paletteName || defaultPalette, labelText);
      });
    });

    var activeButton = document.querySelector('[data-calendar-palette].active');
    var activeName = defaultPalette;
    var activeLabel = 'Twilight';

    if (activeButton) {
      activeName = activeButton.getAttribute('data-calendar-palette') || defaultPalette;
      activeLabel = (activeButton.getAttribute('data-palette-label') || activeButton.textContent || activeLabel).trim();
    }

    applyPalette(activeName, activeLabel);
  });

</script>

{% if site.google_analytics %}
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', '{{ site.google_analytics }}']);
  _gaq.push(['_trackPageview']);
  (function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();



</script>
{% endif %}
